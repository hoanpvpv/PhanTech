<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sản phẩm thang máy - Công ty PhanTech</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../assets/fonts/themify-icons-font/themify-icons/themify-icons.css">
    <style>
        .product-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .product-card img {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .filter-section,
        .sidebar-section {
            background: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .filter-section h4,
        .sidebar-section h4 {
            margin-bottom: 15px;
        }

        .filter-section .form-check {
            margin-bottom: 10px;
        }

        .product-card a {
            text-decoration: none;
            color: inherit;
        }

        .search-bar {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="scale-wrapper">
        <div id="nav-container"></div>
        <main style="background-color: #f8f9fa;">
            <div class="banner text-center text-white py-5">
                <h1 class="display-4 fw-bold" style="text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">Sản phẩm thang máy
                </h1>
                <p class="lead" style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);">Các giải pháp thang máy đa dạng từ
                    PhanTech</p>
            </div>
            <div class="container my-5">
                <div class="row">
                    <div class="col-lg-3 col-md-12 mb-4">
                        <div class="filter-section">
                            <h4 class="text-primary">Bộ lọc sản phẩm</h4>
                            <h5>Loại thang máy</h5>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="homelift"
                                    id="filter-homelift"><label class="form-check-label" for="filter-homelift">Thang máy
                                    gia đình</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="passenger"
                                    id="filter-passenger"><label class="form-check-label" for="filter-passenger">Thang
                                    máy chở khách</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="glass"
                                    id="filter-glass"><label class="form-check-label" for="filter-glass">Thang máy
                                    kính</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="hydraulic"
                                    id="filter-hydraulic"><label class="form-check-label" for="filter-hydraulic">Thang
                                    máy thủy lực</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="freight"
                                    id="filter-freight"><label class="form-check-label" for="filter-freight">Thang máy
                                    hàng hóa</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="hospital"
                                    id="filter-hospital"><label class="form-check-label" for="filter-hospital">Thang máy
                                    bệnh viện</label></div>
                            <h5 class="mt-3">Tải trọng</h5>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="350kg"
                                    id="filter-350kg"><label class="form-check-label" for="filter-350kg">350kg</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="500kg"
                                    id="filter-500kg"><label class="form-check-label" for="filter-500kg">500kg</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="800kg"
                                    id="filter-800kg"><label class="form-check-label" for="filter-800kg">800kg</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="1000kg"
                                    id="filter-1000kg"><label class="form-check-label"
                                    for="filter-1000kg">1000kg</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="1500kg"
                                    id="filter-1500kg"><label class="form-check-label"
                                    for="filter-1500kg">1500kg</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="2000kg"
                                    id="filter-2000kg"><label class="form-check-label"
                                    for="filter-2000kg">2000kg</label></div>
                            <h5 class="mt-3">Tốc độ</h5>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="0.4m/s"
                                    id="filter-0.4ms"><label class="form-check-label" for="filter-0.4ms">0.4 m/s</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="0.5m/s"
                                    id="filter-0.5ms"><label class="form-check-label" for="filter-0.5ms">0.5 m/s</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="0.6m/s"
                                    id="filter-0.6ms"><label class="form-check-label" for="filter-0.6ms">0.6 m/s</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="0.8m/s"
                                    id="filter-0.8ms"><label class="form-check-label" for="filter-0.8ms">0.8 m/s</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="1.0m/s"
                                    id="filter-1.0ms"><label class="form-check-label" for="filter-1.0ms">1.0 m/s</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" value="1.5m/s"
                                    id="filter-1.5ms"><label class="form-check-label" for="filter-1.5ms">1.5 m/s</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-12 mb-4">
                        <div class="search-bar">
                            <input type="text" class="form-control" id="product-search"
                                placeholder="Tìm kiếm sản phẩm theo tên...">
                        </div>
                        <div class="row g-4" id="product-list"></div>
                    </div>
                </div>
            </div>
        </main>
        <div id="footer-container"></div>
        <div id="cart-container"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="../cart.js"></script>
    <script>
        // Hàm tải nội dung từ tệp HTML
        async function loadComponent(containerId, filePath) {
            try {
                const response = await fetch(filePath);
                if (!response.ok) throw new Error(`Không thể fetch ${filePath}: ${response.status}`);
                const content = await response.text();
                document.getElementById(containerId).innerHTML = content;
            } catch (error) {
                console.error(error);
                document.getElementById(containerId).innerHTML = `<p>Lỗi: Không thể tải ${filePath}</p>`;
            }
        }

        // Tải các component
        loadComponent('nav-container', '../component/nav.html');
        loadComponent('footer-container', '../component/footer.html');
        loadComponent('cart-container', '../component/cart.html');

        // Tải và hiển thị sản phẩm từ JSON
        let products = [];
        let filteredProducts = [];

        async function loadProducts() {
            try {
                const response = await fetch('./products.json');
                if (!response.ok) throw new Error(`Không thể fetch products.json: ${response.status}`);
                products = await response.json();
                filteredProducts = [...products];
                displayProducts();
            } catch (error) {
                console.error(error);
                document.getElementById('product-list').innerHTML = '<p>Lỗi: Không thể tải danh sách sản phẩm.</p>';
            }
        }

        function displayProducts() {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';
            if (filteredProducts.length === 0) {
                productList.innerHTML = '<p>Không tìm thấy sản phẩm nào phù hợp.</p>';
                return;
            }
            filteredProducts.forEach(product => {
                const productCard = `
                    <div class="col-md-4">
                        <a href="./product-detail.html?title=${encodeURIComponent(product.name)}" class="text-decoration-none">
                            <div class="product-card">
                                <img src="${product.images[0]}" alt="${product.name}">
                                <h5>${product.name}</h5>
                                <p>${product.description}</p>
                                <p><strong>Tải trọng:</strong> ${product.loadCapacity}</p>
                                <p><strong>Tốc độ:</strong> ${product.speed}</p>
                            </div>
                        </a>
                    </div>
                `;
                productList.innerHTML += productCard;
            });
        }

        // Lọc sản phẩm dựa trên filter và tìm kiếm
        function filterProducts() {
            const searchQuery = document.getElementById('product-search').value.trim().toLowerCase();
            const selectedTypes = Array.from(document.querySelectorAll('.form-check-input[value^="homelift"], .form-check-input[value^="passenger"], .form-check-input[value^="glass"], .form-check-input[value^="hydraulic"], .form-check-input[value^="freight"], .form-check-input[value^="hospital"]'))
                .filter(input => input.checked)
                .map(input => input.value);
            const selectedLoads = Array.from(document.querySelectorAll('.form-check-input[value$="kg"]'))
                .filter(input => input.checked)
                .map(input => input.value);
            const selectedSpeeds = Array.from(document.querySelectorAll('.form-check-input[value$="m/s"]'))
                .filter(input => input.checked)
                .map(input => input.value);

            filteredProducts = products.filter(product => {
                const matchSearch = searchQuery === '' || product.name.toLowerCase().includes(searchQuery);
                const matchType = selectedTypes.length === 0 || selectedTypes.includes(product.type);
                const matchLoad = selectedLoads.length === 0 || selectedLoads.includes(product.loadCapacity);
                const matchSpeed = selectedSpeeds.length === 0 || selectedSpeeds.includes(product.speed);
                return matchSearch && matchType && matchLoad && matchSpeed;
            });

            displayProducts();
        }

        // Thêm sự kiện cho các checkbox và thanh tìm kiếm
        document.querySelectorAll('.form-check-input').forEach(input => {
            input.addEventListener('change', filterProducts);
        });

        document.getElementById('product-search').addEventListener('input', filterProducts);

        // Khởi chạy khi trang load
        document.addEventListener('DOMContentLoaded', loadProducts);
    </script>
</body>

</html>